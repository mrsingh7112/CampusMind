"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/admin/timetable/generate/route";
exports.ids = ["app/api/admin/timetable/generate/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "./action-async-storage.external?8dda":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "./request-async-storage.external?3d59":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "./static-generation-async-storage.external?16bc":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Ftimetable%2Fgenerate%2Froute&page=%2Fapi%2Fadmin%2Ftimetable%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Ftimetable%2Fgenerate%2Froute.ts&appDir=%2FUsers%2Fmr_singh_7112%2FDesktop%2Fcampus_mind_backup_4_10_30%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmr_singh_7112%2FDesktop%2Fcampus_mind_backup_4_10_30&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Ftimetable%2Fgenerate%2Froute&page=%2Fapi%2Fadmin%2Ftimetable%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Ftimetable%2Fgenerate%2Froute.ts&appDir=%2FUsers%2Fmr_singh_7112%2FDesktop%2Fcampus_mind_backup_4_10_30%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmr_singh_7112%2FDesktop%2Fcampus_mind_backup_4_10_30&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_mr_singh_7112_Desktop_campus_mind_backup_4_10_30_src_app_api_admin_timetable_generate_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/admin/timetable/generate/route.ts */ \"(rsc)/./src/app/api/admin/timetable/generate/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/admin/timetable/generate/route\",\n        pathname: \"/api/admin/timetable/generate\",\n        filename: \"route\",\n        bundlePath: \"app/api/admin/timetable/generate/route\"\n    },\n    resolvedPagePath: \"/Users/mr_singh_7112/Desktop/campus_mind_backup_4_10_30/src/app/api/admin/timetable/generate/route.ts\",\n    nextConfigOutput,\n    userland: _Users_mr_singh_7112_Desktop_campus_mind_backup_4_10_30_src_app_api_admin_timetable_generate_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/admin/timetable/generate/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhZG1pbiUyRnRpbWV0YWJsZSUyRmdlbmVyYXRlJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhZG1pbiUyRnRpbWV0YWJsZSUyRmdlbmVyYXRlJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYWRtaW4lMkZ0aW1ldGFibGUlMkZnZW5lcmF0ZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRm1yX3NpbmdoXzcxMTIlMkZEZXNrdG9wJTJGY2FtcHVzX21pbmRfYmFja3VwXzRfMTBfMzAlMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGbXJfc2luZ2hfNzExMiUyRkRlc2t0b3AlMkZjYW1wdXNfbWluZF9iYWNrdXBfNF8xMF8zMCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNxRDtBQUNsSTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SiIsInNvdXJjZXMiOlsid2VicGFjazovL2NhbXB1cy1taW5kLz84MDlmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9tcl9zaW5naF83MTEyL0Rlc2t0b3AvY2FtcHVzX21pbmRfYmFja3VwXzRfMTBfMzAvc3JjL2FwcC9hcGkvYWRtaW4vdGltZXRhYmxlL2dlbmVyYXRlL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hZG1pbi90aW1ldGFibGUvZ2VuZXJhdGUvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hZG1pbi90aW1ldGFibGUvZ2VuZXJhdGVcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2FkbWluL3RpbWV0YWJsZS9nZW5lcmF0ZS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9tcl9zaW5naF83MTEyL0Rlc2t0b3AvY2FtcHVzX21pbmRfYmFja3VwXzRfMTBfMzAvc3JjL2FwcC9hcGkvYWRtaW4vdGltZXRhYmxlL2dlbmVyYXRlL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2FkbWluL3RpbWV0YWJsZS9nZW5lcmF0ZS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Ftimetable%2Fgenerate%2Froute&page=%2Fapi%2Fadmin%2Ftimetable%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Ftimetable%2Fgenerate%2Froute.ts&appDir=%2FUsers%2Fmr_singh_7112%2FDesktop%2Fcampus_mind_backup_4_10_30%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmr_singh_7112%2FDesktop%2Fcampus_mind_backup_4_10_30&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/admin/timetable/generate/route.ts":
/*!*******************************************************!*\
  !*** ./src/app/api/admin/timetable/generate/route.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n\n\n\n\nasync function POST(request) {\n    try {\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_2__.getServerSession)(_lib_auth__WEBPACK_IMPORTED_MODULE_3__.authOptions);\n        const user = session?.user;\n        if (!user || user.role !== \"ADMIN\") {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const body = await request.json();\n        const { courseId, semester } = body;\n        if (!courseId || !semester) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Course ID and semester are required\"\n            }, {\n                status: 400\n            });\n        }\n        console.log(`[TIMETABLE] Starting generation for courseId=${courseId}, semester=${semester}`);\n        // Fetch course and subjects\n        const course = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.course.findUnique({\n            where: {\n                id: courseId\n            },\n            include: {\n                department: true\n            }\n        });\n        if (!course) {\n            console.error(`[TIMETABLE] Course not found: courseId=${courseId}`);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Course not found\"\n            }, {\n                status: 404\n            });\n        }\n        // Fetch subjects and faculty\n        const subjects = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.subject.findMany({\n            where: {\n                courseId: course.id,\n                semester\n            }\n        });\n        if (!subjects || subjects.length === 0) {\n            console.error(`[TIMETABLE] No subjects found for courseId=${courseId}, semester=${semester}`);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"No subjects found for this course and semester\"\n            }, {\n                status: 404\n            });\n        }\n        console.log(`[TIMETABLE] Found ${subjects.length} subjects`);\n        // Only allow teaching faculty (exclude Dean, Admin, Support, HOD, etc.)\n        const NON_TEACHING_POSITIONS = [\n            \"Dean\",\n            \"Admin\",\n            \"Support\",\n            \"HOD\",\n            \"Head of Department\",\n            \"Principal\",\n            \"Director\",\n            \"Office\",\n            \"Clerk\",\n            \"Registrar\",\n            \"Assistant Registrar\",\n            \"Manager\",\n            \"Assistant Manager\",\n            \"Accountant\",\n            \"Finance\",\n            \"Library\",\n            \"Librarian\",\n            \"System Admin\",\n            \"Technical\",\n            \"Maintenance\",\n            \"Peon\",\n            \"Sweeper\",\n            \"Security\",\n            \"Receptionist\",\n            \"Counselor\",\n            \"Exam\",\n            \"Examiner\",\n            \"Exam Cell\",\n            \"Admission\",\n            \"Admission Cell\",\n            \"Transport\",\n            \"Driver\",\n            \"Warden\",\n            \"Hostel\",\n            \"Mess\",\n            \"Canteen\",\n            \"Medical\",\n            \"Nurse\",\n            \"Doctor\",\n            \"Lab Assistant\",\n            \"Workshop Assistant\",\n            \"Store\",\n            \"Storekeeper\",\n            \"Purchase\",\n            \"Procurement\",\n            \"IT\",\n            \"Network\",\n            \"Virtual Faculty\",\n            \"Virtual\",\n            \"Fee\",\n            \"Support Staff\",\n            \"Admin Staff\",\n            \"Dean Staff\",\n            \"HOD Staff\"\n        ];\n        const facultySubjects = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.facultySubject.findMany({\n            where: {\n                subject: {\n                    courseId: course.id,\n                    semester\n                },\n                faculty: {\n                    NOT: {\n                        OR: NON_TEACHING_POSITIONS.map((pos)=>({\n                                position: {\n                                    contains: pos,\n                                    mode: \"insensitive\"\n                                }\n                            }))\n                    }\n                }\n            },\n            include: {\n                faculty: true,\n                subject: true\n            }\n        });\n        if (!facultySubjects || facultySubjects.length === 0) {\n            console.error(`[TIMETABLE] No faculty assigned to subjects for courseId=${courseId}, semester=${semester}`);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"No faculty assigned to subjects\"\n            }, {\n                status: 404\n            });\n        }\n        console.log(`[TIMETABLE] Found ${facultySubjects.length} faculty-subject assignments`);\n        // Pre-fetch all rooms\n        const allRooms = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.room.findMany({\n            where: {\n                status: \"ACTIVE\"\n            }\n        });\n        const lectureRooms = allRooms.filter((r)=>r.type === \"LECTURE\");\n        const labRooms = allRooms.filter((r)=>r.type === \"LAB\");\n        const workshopRooms = allRooms.filter((r)=>r.type === \"WORKSHOP\");\n        if (lectureRooms.length === 0) {\n            console.error(\"[TIMETABLE] No lecture rooms available\");\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"No lecture rooms available\"\n            }, {\n                status: 404\n            });\n        }\n        // Assign a fixed room for this course and semester\n        const assignedRoom = lectureRooms[Math.floor(Math.random() * lectureRooms.length)];\n        console.log(`[TIMETABLE] Assigned room: ${assignedRoom.name}`);\n        const days = [\n            1,\n            2,\n            3,\n            4,\n            5\n        ];\n        const timeSlots = [\n            {\n                start: \"09:00\",\n                end: \"10:00\"\n            },\n            {\n                start: \"10:00\",\n                end: \"11:00\"\n            },\n            {\n                start: \"11:00\",\n                end: \"12:00\"\n            },\n            {\n                start: \"13:00\",\n                end: \"14:00\"\n            },\n            {\n                start: \"14:00\",\n                end: \"15:00\"\n            },\n            {\n                start: \"15:00\",\n                end: \"16:00\"\n            }\n        ];\n        // Track faculty assignments\n        const facultyWeeklyAssignments = new Map(); // facultyId -> Set of `${day}-${slotIdx}`\n        // Assign lunch slots: randomly pick 11-12 or 12-1 for each day\n        const lunchSlots = {};\n        for (const day of days){\n            lunchSlots[day] = Math.random() < 0.5 ? 2 : 3; // 2: 11-12, 3: 12-1\n        }\n        console.log(\"[TIMETABLE] Lunch slots assigned:\", lunchSlots);\n        const isLunchPeriod = (day, slotIdx)=>lunchSlots[day] === slotIdx;\n        // Schedule labs/workshops first\n        const assignedSlots = [];\n        const isComputerRelated = /computer|it/i.test(course.name) || /computer|it/i.test(course.department.name);\n        const isMechanicalOrWorkshop = /mechanical|electrical|civil|workshop/i.test(course.name) || /mechanical|electrical|civil|workshop/i.test(course.department.name);\n        let practicals = [];\n        if (isComputerRelated) {\n            practicals = subjects.filter((s)=>s.type === \"LAB\");\n        } else if (isMechanicalOrWorkshop) {\n            practicals = subjects.filter((s)=>s.type === \"WORKSHOP\");\n        }\n        console.log(`[TIMETABLE] Found ${practicals.length} practical subjects`);\n        // Schedule practicals\n        let practicalCounter = 0;\n        for (const practical of practicals){\n            let scheduled = false;\n            const daysShuffled = [\n                ...days\n            ].sort(()=>Math.random() - 0.5);\n            const practicalRooms = isComputerRelated ? labRooms : workshopRooms;\n            if (practicalRooms.length === 0) {\n                console.warn(`[TIMETABLE] No ${isComputerRelated ? \"lab\" : \"workshop\"} rooms available for practical: ${practical.name}`);\n                continue;\n            }\n            for (const day of daysShuffled){\n                for(let slotIdx = 0; slotIdx < timeSlots.length - 1; slotIdx++){\n                    if (isLunchPeriod(day, slotIdx) || isLunchPeriod(day, slotIdx + 1)) continue;\n                    const faculty = facultySubjects.find((f)=>f.subjectId === practical.id)?.faculty;\n                    if (!faculty) {\n                        console.warn(`[TIMETABLE] No faculty found for practical: ${practical.name}`);\n                        continue;\n                    }\n                    // Check faculty availability\n                    if (!facultyWeeklyAssignments.has(faculty.id)) facultyWeeklyAssignments.set(faculty.id, new Set());\n                    const facSet = facultyWeeklyAssignments.get(faculty.id);\n                    if (facSet.has(`${day}-${slotIdx}`) || facSet.has(`${day}-${slotIdx + 1}`)) continue;\n                    // Find an available practical room\n                    const foundRoom = practicalRooms[Math.floor(Math.random() * practicalRooms.length)];\n                    if (!foundRoom) continue;\n                    assignedSlots.push({\n                        courseId: course.id,\n                        subjectId: practical.id,\n                        facultyId: faculty.id,\n                        roomId: foundRoom.id,\n                        dayOfWeek: day,\n                        startTime: timeSlots[slotIdx].start,\n                        endTime: timeSlots[slotIdx + 1].end,\n                        semester\n                    });\n                    // Mark faculty as used\n                    facSet.add(`${day}-${slotIdx}`);\n                    facSet.add(`${day}-${slotIdx + 1}`);\n                    scheduled = true;\n                    console.log(`[TIMETABLE] Scheduled practical: ${practical.name} on day ${day}, slots ${slotIdx}-${slotIdx + 1}`);\n                    break;\n                }\n                if (scheduled) break;\n            }\n            if (!scheduled) {\n                console.warn(`[TIMETABLE] Could not schedule practical: ${practical.name}`);\n            }\n            practicalCounter++;\n            console.log(`[TIMETABLE] Practical scheduling progress: ${practicalCounter}/${practicals.length}`);\n        }\n        console.log(\"[TIMETABLE] Finished scheduling practicals. Assigned slots so far:\", assignedSlots.length);\n        // --- Schedule lectures into a flat list of all available (non-lunch) slots for the week ---\n        const allAvailableSlots = [];\n        for (const day of days){\n            for(let slotIdx = 0; slotIdx < timeSlots.length; slotIdx++){\n                if (isLunchPeriod(day, slotIdx)) continue;\n                allAvailableSlots.push({\n                    day,\n                    slotIdx\n                });\n            }\n        }\n        // Shuffle all available slots\n        for(let i = allAvailableSlots.length - 1; i > 0; i--){\n            const j = Math.floor(Math.random() * (i + 1));\n            [allAvailableSlots[i], allAvailableSlots[j]] = [\n                allAvailableSlots[j],\n                allAvailableSlots[i]\n            ];\n        }\n        // Prepare lecture assignments\n        const nonLabWorkshopSubjects = subjects.filter((s)=>s.type !== \"LAB\" && s.type !== \"WORKSHOP\");\n        const totalLectures = allAvailableSlots.length;\n        let subjectIdx = 0;\n        let assignedLectureSlots = 0;\n        // Assign as many lectures as possible\n        for (const slot of allAvailableSlots){\n            if (subjectIdx >= nonLabWorkshopSubjects.length) subjectIdx = 0; // Repeat subjects if needed\n            const subj = nonLabWorkshopSubjects[subjectIdx];\n            const faculty = facultySubjects.find((f)=>f.subjectId === subj.id)?.faculty;\n            if (!faculty) {\n                subjectIdx++;\n                continue;\n            }\n            if (!facultyWeeklyAssignments.has(faculty.id)) facultyWeeklyAssignments.set(faculty.id, new Set());\n            const facSet = facultyWeeklyAssignments.get(faculty.id);\n            if (facSet.has(`${slot.day}-${slot.slotIdx}`)) {\n                subjectIdx++;\n                continue;\n            }\n            assignedSlots.push({\n                courseId: course.id,\n                subjectId: subj.id,\n                facultyId: faculty.id,\n                roomId: assignedRoom.id,\n                dayOfWeek: slot.day,\n                startTime: timeSlots[slot.slotIdx].start,\n                endTime: timeSlots[slot.slotIdx].end,\n                semester\n            });\n            facSet.add(`${slot.day}-${slot.slotIdx}`);\n            assignedLectureSlots++;\n            subjectIdx++;\n            // Stop if we've assigned as many lectures as there are subjects * their credits (or some max)\n            if (assignedLectureSlots >= nonLabWorkshopSubjects.length * 5) break;\n        }\n        console.log(\"[TIMETABLE] Finished scheduling lectures. Total assigned slots:\", assignedSlots.length);\n        // Save to DB: delete old, insert new\n        console.log(\"[TIMETABLE] Deleting old slots from DB...\");\n        await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.timetableSlot.deleteMany({\n            where: {\n                courseId: course.id,\n                semester\n            }\n        });\n        console.log(`[TIMETABLE] Deleted old slots for courseId=${courseId}, semester=${semester}`);\n        let dbInsertCounter = 0;\n        for (const slot of assignedSlots){\n            await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.timetableSlot.create({\n                data: slot\n            });\n            dbInsertCounter++;\n            if (dbInsertCounter % 5 === 0 || dbInsertCounter === assignedSlots.length) {\n                console.log(`[TIMETABLE] Inserted ${dbInsertCounter}/${assignedSlots.length} slots into DB`);\n            }\n        }\n        console.log(`[TIMETABLE] Created ${assignedSlots.length} new slots`);\n        // Fetch and return\n        const fullSlots = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.timetableSlot.findMany({\n            where: {\n                courseId: course.id,\n                semester\n            },\n            include: {\n                subject: {\n                    select: {\n                        id: true,\n                        name: true,\n                        code: true,\n                        type: true\n                    }\n                },\n                faculty: {\n                    select: {\n                        id: true,\n                        name: true,\n                        email: true\n                    }\n                },\n                room: {\n                    select: {\n                        id: true,\n                        name: true,\n                        type: true,\n                        building: true,\n                        floor: true\n                    }\n                }\n            },\n            orderBy: [\n                {\n                    dayOfWeek: \"asc\"\n                },\n                {\n                    startTime: \"asc\"\n                }\n            ]\n        });\n        console.log(`[TIMETABLE] Successfully generated timetable with ${fullSlots.length} slots`);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            message: \"Timetable generated\",\n            timetable: {\n                course: {\n                    id: course.id,\n                    name: course.name,\n                    code: course.code\n                },\n                semester,\n                slots: fullSlots\n            }\n        });\n    } catch (error) {\n        console.error(\"[TIMETABLE] Error generating timetable:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to generate timetable\"\n        }, {\n            status: 500\n        });\n    }\n}\n// Helper function to create a virtual faculty\nasync function createVirtualFaculty(departmentId, subjectName) {\n    const virtualFaculty = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.faculty.create({\n        data: {\n            name: `Virtual Faculty - ${subjectName}`,\n            email: `virtual.${subjectName.toLowerCase().replace(/\\s+/g, \".\")}@campus.edu`,\n            password: \"virtual123\",\n            departmentId,\n            position: \"Virtual Faculty\",\n            employeeId: `VF${Date.now()}`,\n            status: \"ACTIVE\"\n        }\n    });\n    return virtualFaculty;\n}\n// Helper function to create a virtual room\nasync function createVirtualRoom(courseName) {\n    const virtualRoom = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.room.create({\n        data: {\n            name: `Virtual-${courseName}-${Date.now()}`,\n            capacity: 100,\n            type: \"VIRTUAL\",\n            floor: 0,\n            building: \"ONLINE\",\n            isVirtual: true,\n            status: \"ACTIVE\"\n        }\n    });\n    return virtualRoom;\n}\n// Helper function to handle faculty shortage\nasync function handleFacultyShortage(subject, departmentId) {\n    console.log(`[TIMETABLE DEBUG] Creating virtual faculty for subject: ${subject.name}`);\n    const virtualFaculty = await createVirtualFaculty(departmentId, subject.name);\n    // Assign the virtual faculty to the subject\n    await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.facultySubject.create({\n        data: {\n            facultyId: virtualFaculty.id,\n            subjectId: subject.id\n        }\n    });\n    return virtualFaculty;\n}\n// Helper function to handle room shortage\nasync function handleRoomShortage(course, type) {\n    console.log(`[TIMETABLE DEBUG] Creating virtual room for course: ${course.name}`);\n    const virtualRoom = await createVirtualRoom(course.name);\n    return virtualRoom;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9hZG1pbi90aW1ldGFibGUvZ2VuZXJhdGUvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTJDO0FBQ0w7QUFDTztBQUNKO0FBR2xDLGVBQWVJLEtBQUtDLE9BQWdCO0lBQ3pDLElBQUk7UUFDRixNQUFNQyxVQUFVLE1BQU1KLDJEQUFnQkEsQ0FBQ0Msa0RBQVdBO1FBQ2xELE1BQU1JLE9BQU9ELFNBQVNDO1FBQ3RCLElBQUksQ0FBQ0EsUUFBUUEsS0FBS0MsSUFBSSxLQUFLLFNBQVM7WUFDbEMsT0FBT1Isa0ZBQVlBLENBQUNTLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUFlLEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUNwRTtRQUVBLE1BQU1DLE9BQU8sTUFBTVAsUUFBUUksSUFBSTtRQUMvQixNQUFNLEVBQUVJLFFBQVEsRUFBRUMsUUFBUSxFQUFFLEdBQUdGO1FBRS9CLElBQUksQ0FBQ0MsWUFBWSxDQUFDQyxVQUFVO1lBQzFCLE9BQU9kLGtGQUFZQSxDQUFDUyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBc0MsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQzNGO1FBRUFJLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLDZDQUE2QyxFQUFFSCxTQUFTLFdBQVcsRUFBRUMsU0FBUyxDQUFDO1FBRTVGLDRCQUE0QjtRQUM1QixNQUFNRyxTQUFTLE1BQU1oQiwrQ0FBTUEsQ0FBQ2dCLE1BQU0sQ0FBQ0MsVUFBVSxDQUFDO1lBQzVDQyxPQUFPO2dCQUFFQyxJQUFJUDtZQUFTO1lBQ3RCUSxTQUFTO2dCQUFFQyxZQUFZO1lBQUs7UUFDOUI7UUFFQSxJQUFJLENBQUNMLFFBQVE7WUFDWEYsUUFBUUwsS0FBSyxDQUFDLENBQUMsdUNBQXVDLEVBQUVHLFNBQVMsQ0FBQztZQUNsRSxPQUFPYixrRkFBWUEsQ0FBQ1MsSUFBSSxDQUFDO2dCQUFFQyxPQUFPO1lBQW1CLEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUN4RTtRQUVBLDZCQUE2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QUk7SUFDdkQsT0FBTzJFO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYW1wdXMtbWluZC8uL3NyYy9hcHAvYXBpL2FkbWluL3RpbWV0YWJsZS9nZW5lcmF0ZS9yb3V0ZS50cz9mOTk1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJ0AvbGliL3ByaXNtYSc7XG5pbXBvcnQgeyBnZXRTZXJ2ZXJTZXNzaW9uIH0gZnJvbSAnbmV4dC1hdXRoJztcbmltcG9ydCB7IGF1dGhPcHRpb25zIH0gZnJvbSAnQC9saWIvYXV0aCc7XG5pbXBvcnQgdHlwZSB7IFByaXNtYSB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogUmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXJ2ZXJTZXNzaW9uKGF1dGhPcHRpb25zKTtcbiAgICBjb25zdCB1c2VyID0gc2Vzc2lvbj8udXNlciBhcyB7IHJvbGU/OiBzdHJpbmcgfSB8IHVuZGVmaW5lZDtcbiAgICBpZiAoIXVzZXIgfHwgdXNlci5yb2xlICE9PSAnQURNSU4nKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSwgeyBzdGF0dXM6IDQwMSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgY29uc3QgeyBjb3Vyc2VJZCwgc2VtZXN0ZXIgfSA9IGJvZHk7XG5cbiAgICBpZiAoIWNvdXJzZUlkIHx8ICFzZW1lc3Rlcikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdDb3Vyc2UgSUQgYW5kIHNlbWVzdGVyIGFyZSByZXF1aXJlZCcgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhgW1RJTUVUQUJMRV0gU3RhcnRpbmcgZ2VuZXJhdGlvbiBmb3IgY291cnNlSWQ9JHtjb3Vyc2VJZH0sIHNlbWVzdGVyPSR7c2VtZXN0ZXJ9YCk7XG5cbiAgICAvLyBGZXRjaCBjb3Vyc2UgYW5kIHN1YmplY3RzXG4gICAgY29uc3QgY291cnNlID0gYXdhaXQgcHJpc21hLmNvdXJzZS5maW5kVW5pcXVlKHsgXG4gICAgICB3aGVyZTogeyBpZDogY291cnNlSWQgfSwgXG4gICAgICBpbmNsdWRlOiB7IGRlcGFydG1lbnQ6IHRydWUgfSBcbiAgICB9KTtcbiAgICBcbiAgICBpZiAoIWNvdXJzZSkge1xuICAgICAgY29uc29sZS5lcnJvcihgW1RJTUVUQUJMRV0gQ291cnNlIG5vdCBmb3VuZDogY291cnNlSWQ9JHtjb3Vyc2VJZH1gKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnQ291cnNlIG5vdCBmb3VuZCcgfSwgeyBzdGF0dXM6IDQwNCB9KTtcbiAgICB9XG5cbiAgICAvLyBGZXRjaCBzdWJqZWN0cyBhbmQgZmFjdWx0eVxuICAgIGNvbnN0IHN1YmplY3RzID0gYXdhaXQgcHJpc21hLnN1YmplY3QuZmluZE1hbnkoeyBcbiAgICAgIHdoZXJlOiB7IGNvdXJzZUlkOiBjb3Vyc2UuaWQsIHNlbWVzdGVyIH0gXG4gICAgfSk7XG5cbiAgICBpZiAoIXN1YmplY3RzIHx8IHN1YmplY3RzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc29sZS5lcnJvcihgW1RJTUVUQUJMRV0gTm8gc3ViamVjdHMgZm91bmQgZm9yIGNvdXJzZUlkPSR7Y291cnNlSWR9LCBzZW1lc3Rlcj0ke3NlbWVzdGVyfWApO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdObyBzdWJqZWN0cyBmb3VuZCBmb3IgdGhpcyBjb3Vyc2UgYW5kIHNlbWVzdGVyJyB9LCB7IHN0YXR1czogNDA0IH0pO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGBbVElNRVRBQkxFXSBGb3VuZCAke3N1YmplY3RzLmxlbmd0aH0gc3ViamVjdHNgKTtcblxuICAgIC8vIE9ubHkgYWxsb3cgdGVhY2hpbmcgZmFjdWx0eSAoZXhjbHVkZSBEZWFuLCBBZG1pbiwgU3VwcG9ydCwgSE9ELCBldGMuKVxuICAgIGNvbnN0IE5PTl9URUFDSElOR19QT1NJVElPTlMgPSBbXG4gICAgICAnRGVhbicsICdBZG1pbicsICdTdXBwb3J0JywgJ0hPRCcsICdIZWFkIG9mIERlcGFydG1lbnQnLCAnUHJpbmNpcGFsJywgJ0RpcmVjdG9yJywgJ09mZmljZScsICdDbGVyaycsICdSZWdpc3RyYXInLCAnQXNzaXN0YW50IFJlZ2lzdHJhcicsICdNYW5hZ2VyJywgJ0Fzc2lzdGFudCBNYW5hZ2VyJywgJ0FjY291bnRhbnQnLCAnRmluYW5jZScsICdMaWJyYXJ5JywgJ0xpYnJhcmlhbicsICdTeXN0ZW0gQWRtaW4nLCAnVGVjaG5pY2FsJywgJ01haW50ZW5hbmNlJywgJ1Blb24nLCAnU3dlZXBlcicsICdTZWN1cml0eScsICdSZWNlcHRpb25pc3QnLCAnQ291bnNlbG9yJywgJ0V4YW0nLCAnRXhhbWluZXInLCAnRXhhbSBDZWxsJywgJ0FkbWlzc2lvbicsICdBZG1pc3Npb24gQ2VsbCcsICdUcmFuc3BvcnQnLCAnRHJpdmVyJywgJ1dhcmRlbicsICdIb3N0ZWwnLCAnTWVzcycsICdDYW50ZWVuJywgJ01lZGljYWwnLCAnTnVyc2UnLCAnRG9jdG9yJywgJ0xhYiBBc3Npc3RhbnQnLCAnV29ya3Nob3AgQXNzaXN0YW50JywgJ1N0b3JlJywgJ1N0b3Jla2VlcGVyJywgJ1B1cmNoYXNlJywgJ1Byb2N1cmVtZW50JywgJ0lUJywgJ05ldHdvcmsnLCAnVmlydHVhbCBGYWN1bHR5JywgJ1ZpcnR1YWwnLCAnRmVlJywgJ1N1cHBvcnQgU3RhZmYnLCAnQWRtaW4gU3RhZmYnLCAnRGVhbiBTdGFmZicsICdIT0QgU3RhZmYnXG4gICAgXTtcbiAgICBjb25zdCBmYWN1bHR5U3ViamVjdHMgPSBhd2FpdCBwcmlzbWEuZmFjdWx0eVN1YmplY3QuZmluZE1hbnkoe1xuICAgICAgd2hlcmU6IHsgXG4gICAgICAgIHN1YmplY3Q6IHsgY291cnNlSWQ6IGNvdXJzZS5pZCwgc2VtZXN0ZXIgfSxcbiAgICAgICAgZmFjdWx0eToge1xuICAgICAgICAgIE5PVDoge1xuICAgICAgICAgICAgT1I6IE5PTl9URUFDSElOR19QT1NJVElPTlMubWFwKHBvcyA9PiAoeyBwb3NpdGlvbjogeyBjb250YWluczogcG9zLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfSkpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgaW5jbHVkZTogeyBmYWN1bHR5OiB0cnVlLCBzdWJqZWN0OiB0cnVlIH0sXG4gICAgfSk7XG5cbiAgICBpZiAoIWZhY3VsdHlTdWJqZWN0cyB8fCBmYWN1bHR5U3ViamVjdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBbVElNRVRBQkxFXSBObyBmYWN1bHR5IGFzc2lnbmVkIHRvIHN1YmplY3RzIGZvciBjb3Vyc2VJZD0ke2NvdXJzZUlkfSwgc2VtZXN0ZXI9JHtzZW1lc3Rlcn1gKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnTm8gZmFjdWx0eSBhc3NpZ25lZCB0byBzdWJqZWN0cycgfSwgeyBzdGF0dXM6IDQwNCB9KTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhgW1RJTUVUQUJMRV0gRm91bmQgJHtmYWN1bHR5U3ViamVjdHMubGVuZ3RofSBmYWN1bHR5LXN1YmplY3QgYXNzaWdubWVudHNgKTtcblxuICAgIC8vIFByZS1mZXRjaCBhbGwgcm9vbXNcbiAgICBjb25zdCBhbGxSb29tcyA9IGF3YWl0IHByaXNtYS5yb29tLmZpbmRNYW55KHsgd2hlcmU6IHsgc3RhdHVzOiAnQUNUSVZFJyB9IH0pO1xuICAgIGNvbnN0IGxlY3R1cmVSb29tcyA9IGFsbFJvb21zLmZpbHRlcihyID0+IHIudHlwZSA9PT0gJ0xFQ1RVUkUnKTtcbiAgICBjb25zdCBsYWJSb29tcyA9IGFsbFJvb21zLmZpbHRlcihyID0+IHIudHlwZSA9PT0gJ0xBQicpO1xuICAgIGNvbnN0IHdvcmtzaG9wUm9vbXMgPSBhbGxSb29tcy5maWx0ZXIociA9PiByLnR5cGUgPT09ICdXT1JLU0hPUCcpO1xuXG4gICAgaWYgKGxlY3R1cmVSb29tcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tUSU1FVEFCTEVdIE5vIGxlY3R1cmUgcm9vbXMgYXZhaWxhYmxlJyk7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ05vIGxlY3R1cmUgcm9vbXMgYXZhaWxhYmxlJyB9LCB7IHN0YXR1czogNDA0IH0pO1xuICAgIH1cblxuICAgIC8vIEFzc2lnbiBhIGZpeGVkIHJvb20gZm9yIHRoaXMgY291cnNlIGFuZCBzZW1lc3RlclxuICAgIGNvbnN0IGFzc2lnbmVkUm9vbSA9IGxlY3R1cmVSb29tc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBsZWN0dXJlUm9vbXMubGVuZ3RoKV07XG4gICAgY29uc29sZS5sb2coYFtUSU1FVEFCTEVdIEFzc2lnbmVkIHJvb206ICR7YXNzaWduZWRSb29tLm5hbWV9YCk7XG5cbiAgICBjb25zdCBkYXlzID0gWzEsIDIsIDMsIDQsIDVdO1xuICAgIGNvbnN0IHRpbWVTbG90cyA9IFtcbiAgICAgIHsgc3RhcnQ6ICcwOTowMCcsIGVuZDogJzEwOjAwJyB9LFxuICAgICAgeyBzdGFydDogJzEwOjAwJywgZW5kOiAnMTE6MDAnIH0sXG4gICAgICB7IHN0YXJ0OiAnMTE6MDAnLCBlbmQ6ICcxMjowMCcgfSxcbiAgICAgIHsgc3RhcnQ6ICcxMzowMCcsIGVuZDogJzE0OjAwJyB9LFxuICAgICAgeyBzdGFydDogJzE0OjAwJywgZW5kOiAnMTU6MDAnIH0sXG4gICAgICB7IHN0YXJ0OiAnMTU6MDAnLCBlbmQ6ICcxNjowMCcgfSxcbiAgICBdO1xuXG4gICAgLy8gVHJhY2sgZmFjdWx0eSBhc3NpZ25tZW50c1xuICAgIGNvbnN0IGZhY3VsdHlXZWVrbHlBc3NpZ25tZW50cyA9IG5ldyBNYXAoKTsgLy8gZmFjdWx0eUlkIC0+IFNldCBvZiBgJHtkYXl9LSR7c2xvdElkeH1gXG5cbiAgICAvLyBBc3NpZ24gbHVuY2ggc2xvdHM6IHJhbmRvbWx5IHBpY2sgMTEtMTIgb3IgMTItMSBmb3IgZWFjaCBkYXlcbiAgICBjb25zdCBsdW5jaFNsb3RzOiBSZWNvcmQ8bnVtYmVyLCBudW1iZXI+ID0ge307XG4gICAgZm9yIChjb25zdCBkYXkgb2YgZGF5cykge1xuICAgICAgbHVuY2hTbG90c1tkYXldID0gTWF0aC5yYW5kb20oKSA8IDAuNSA/IDIgOiAzOyAvLyAyOiAxMS0xMiwgMzogMTItMVxuICAgIH1cbiAgICBjb25zb2xlLmxvZygnW1RJTUVUQUJMRV0gTHVuY2ggc2xvdHMgYXNzaWduZWQ6JywgbHVuY2hTbG90cyk7XG5cbiAgICBjb25zdCBpc0x1bmNoUGVyaW9kID0gKGRheTogbnVtYmVyLCBzbG90SWR4OiBudW1iZXIpID0+IGx1bmNoU2xvdHNbZGF5XSA9PT0gc2xvdElkeDtcblxuICAgIC8vIFNjaGVkdWxlIGxhYnMvd29ya3Nob3BzIGZpcnN0XG4gICAgY29uc3QgYXNzaWduZWRTbG90cyA9IFtdO1xuICAgIGNvbnN0IGlzQ29tcHV0ZXJSZWxhdGVkID0gL2NvbXB1dGVyfGl0L2kudGVzdChjb3Vyc2UubmFtZSkgfHwgL2NvbXB1dGVyfGl0L2kudGVzdChjb3Vyc2UuZGVwYXJ0bWVudC5uYW1lKTtcbiAgICBjb25zdCBpc01lY2hhbmljYWxPcldvcmtzaG9wID0gL21lY2hhbmljYWx8ZWxlY3RyaWNhbHxjaXZpbHx3b3Jrc2hvcC9pLnRlc3QoY291cnNlLm5hbWUpIHx8IC9tZWNoYW5pY2FsfGVsZWN0cmljYWx8Y2l2aWx8d29ya3Nob3AvaS50ZXN0KGNvdXJzZS5kZXBhcnRtZW50Lm5hbWUpO1xuXG4gICAgbGV0IHByYWN0aWNhbHMgPSBbXTtcbiAgICBpZiAoaXNDb21wdXRlclJlbGF0ZWQpIHtcbiAgICAgIHByYWN0aWNhbHMgPSBzdWJqZWN0cy5maWx0ZXIocyA9PiBzLnR5cGUgPT09ICdMQUInKTtcbiAgICB9IGVsc2UgaWYgKGlzTWVjaGFuaWNhbE9yV29ya3Nob3ApIHtcbiAgICAgIHByYWN0aWNhbHMgPSBzdWJqZWN0cy5maWx0ZXIocyA9PiBzLnR5cGUgPT09ICdXT1JLU0hPUCcpO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGBbVElNRVRBQkxFXSBGb3VuZCAke3ByYWN0aWNhbHMubGVuZ3RofSBwcmFjdGljYWwgc3ViamVjdHNgKTtcblxuICAgIC8vIFNjaGVkdWxlIHByYWN0aWNhbHNcbiAgICBsZXQgcHJhY3RpY2FsQ291bnRlciA9IDA7XG4gICAgZm9yIChjb25zdCBwcmFjdGljYWwgb2YgcHJhY3RpY2Fscykge1xuICAgICAgbGV0IHNjaGVkdWxlZCA9IGZhbHNlO1xuICAgICAgY29uc3QgZGF5c1NodWZmbGVkID0gWy4uLmRheXNdLnNvcnQoKCkgPT4gTWF0aC5yYW5kb20oKSAtIDAuNSk7XG4gICAgICBjb25zdCBwcmFjdGljYWxSb29tcyA9IGlzQ29tcHV0ZXJSZWxhdGVkID8gbGFiUm9vbXMgOiB3b3Jrc2hvcFJvb21zO1xuXG4gICAgICBpZiAocHJhY3RpY2FsUm9vbXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgW1RJTUVUQUJMRV0gTm8gJHtpc0NvbXB1dGVyUmVsYXRlZCA/ICdsYWInIDogJ3dvcmtzaG9wJ30gcm9vbXMgYXZhaWxhYmxlIGZvciBwcmFjdGljYWw6ICR7cHJhY3RpY2FsLm5hbWV9YCk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBmb3IgKGNvbnN0IGRheSBvZiBkYXlzU2h1ZmZsZWQpIHtcbiAgICAgICAgZm9yIChsZXQgc2xvdElkeCA9IDA7IHNsb3RJZHggPCB0aW1lU2xvdHMubGVuZ3RoIC0gMTsgc2xvdElkeCsrKSB7XG4gICAgICAgICAgaWYgKGlzTHVuY2hQZXJpb2QoZGF5LCBzbG90SWR4KSB8fCBpc0x1bmNoUGVyaW9kKGRheSwgc2xvdElkeCArIDEpKSBjb250aW51ZTtcblxuICAgICAgICAgIGNvbnN0IGZhY3VsdHkgPSBmYWN1bHR5U3ViamVjdHMuZmluZChmID0+IGYuc3ViamVjdElkID09PSBwcmFjdGljYWwuaWQpPy5mYWN1bHR5O1xuICAgICAgICAgIGlmICghZmFjdWx0eSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBbVElNRVRBQkxFXSBObyBmYWN1bHR5IGZvdW5kIGZvciBwcmFjdGljYWw6ICR7cHJhY3RpY2FsLm5hbWV9YCk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBDaGVjayBmYWN1bHR5IGF2YWlsYWJpbGl0eVxuICAgICAgICAgIGlmICghZmFjdWx0eVdlZWtseUFzc2lnbm1lbnRzLmhhcyhmYWN1bHR5LmlkKSkgZmFjdWx0eVdlZWtseUFzc2lnbm1lbnRzLnNldChmYWN1bHR5LmlkLCBuZXcgU2V0KCkpO1xuICAgICAgICAgIGNvbnN0IGZhY1NldCA9IGZhY3VsdHlXZWVrbHlBc3NpZ25tZW50cy5nZXQoZmFjdWx0eS5pZCk7XG4gICAgICAgICAgaWYgKGZhY1NldC5oYXMoYCR7ZGF5fS0ke3Nsb3RJZHh9YCkgfHwgZmFjU2V0LmhhcyhgJHtkYXl9LSR7c2xvdElkeCsxfWApKSBjb250aW51ZTtcblxuICAgICAgICAgIC8vIEZpbmQgYW4gYXZhaWxhYmxlIHByYWN0aWNhbCByb29tXG4gICAgICAgICAgY29uc3QgZm91bmRSb29tID0gcHJhY3RpY2FsUm9vbXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogcHJhY3RpY2FsUm9vbXMubGVuZ3RoKV07XG4gICAgICAgICAgaWYgKCFmb3VuZFJvb20pIGNvbnRpbnVlO1xuXG4gICAgICAgICAgYXNzaWduZWRTbG90cy5wdXNoKHtcbiAgICAgICAgICAgIGNvdXJzZUlkOiBjb3Vyc2UuaWQsXG4gICAgICAgICAgICBzdWJqZWN0SWQ6IHByYWN0aWNhbC5pZCxcbiAgICAgICAgICAgIGZhY3VsdHlJZDogZmFjdWx0eS5pZCxcbiAgICAgICAgICAgIHJvb21JZDogZm91bmRSb29tLmlkLFxuICAgICAgICAgICAgZGF5T2ZXZWVrOiBkYXksXG4gICAgICAgICAgICBzdGFydFRpbWU6IHRpbWVTbG90c1tzbG90SWR4XS5zdGFydCxcbiAgICAgICAgICAgIGVuZFRpbWU6IHRpbWVTbG90c1tzbG90SWR4ICsgMV0uZW5kLFxuICAgICAgICAgICAgc2VtZXN0ZXIsXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICAvLyBNYXJrIGZhY3VsdHkgYXMgdXNlZFxuICAgICAgICAgIGZhY1NldC5hZGQoYCR7ZGF5fS0ke3Nsb3RJZHh9YCk7XG4gICAgICAgICAgZmFjU2V0LmFkZChgJHtkYXl9LSR7c2xvdElkeCArIDF9YCk7XG4gICAgICAgICAgc2NoZWR1bGVkID0gdHJ1ZTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgW1RJTUVUQUJMRV0gU2NoZWR1bGVkIHByYWN0aWNhbDogJHtwcmFjdGljYWwubmFtZX0gb24gZGF5ICR7ZGF5fSwgc2xvdHMgJHtzbG90SWR4fS0ke3Nsb3RJZHgrMX1gKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2NoZWR1bGVkKSBicmVhaztcbiAgICAgIH1cblxuICAgICAgaWYgKCFzY2hlZHVsZWQpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBbVElNRVRBQkxFXSBDb3VsZCBub3Qgc2NoZWR1bGUgcHJhY3RpY2FsOiAke3ByYWN0aWNhbC5uYW1lfWApO1xuICAgICAgfVxuICAgICAgcHJhY3RpY2FsQ291bnRlcisrO1xuICAgICAgY29uc29sZS5sb2coYFtUSU1FVEFCTEVdIFByYWN0aWNhbCBzY2hlZHVsaW5nIHByb2dyZXNzOiAke3ByYWN0aWNhbENvdW50ZXJ9LyR7cHJhY3RpY2Fscy5sZW5ndGh9YCk7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKCdbVElNRVRBQkxFXSBGaW5pc2hlZCBzY2hlZHVsaW5nIHByYWN0aWNhbHMuIEFzc2lnbmVkIHNsb3RzIHNvIGZhcjonLCBhc3NpZ25lZFNsb3RzLmxlbmd0aCk7XG5cbiAgICAvLyAtLS0gU2NoZWR1bGUgbGVjdHVyZXMgaW50byBhIGZsYXQgbGlzdCBvZiBhbGwgYXZhaWxhYmxlIChub24tbHVuY2gpIHNsb3RzIGZvciB0aGUgd2VlayAtLS1cbiAgICBjb25zdCBhbGxBdmFpbGFibGVTbG90cyA9IFtdO1xuICAgIGZvciAoY29uc3QgZGF5IG9mIGRheXMpIHtcbiAgICAgIGZvciAobGV0IHNsb3RJZHggPSAwOyBzbG90SWR4IDwgdGltZVNsb3RzLmxlbmd0aDsgc2xvdElkeCsrKSB7XG4gICAgICAgIGlmIChpc0x1bmNoUGVyaW9kKGRheSwgc2xvdElkeCkpIGNvbnRpbnVlO1xuICAgICAgICBhbGxBdmFpbGFibGVTbG90cy5wdXNoKHsgZGF5LCBzbG90SWR4IH0pO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBTaHVmZmxlIGFsbCBhdmFpbGFibGUgc2xvdHNcbiAgICBmb3IgKGxldCBpID0gYWxsQXZhaWxhYmxlU2xvdHMubGVuZ3RoIC0gMTsgaSA+IDA7IGktLSkge1xuICAgICAgY29uc3QgaiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChpICsgMSkpO1xuICAgICAgW2FsbEF2YWlsYWJsZVNsb3RzW2ldLCBhbGxBdmFpbGFibGVTbG90c1tqXV0gPSBbYWxsQXZhaWxhYmxlU2xvdHNbal0sIGFsbEF2YWlsYWJsZVNsb3RzW2ldXTtcbiAgICB9XG4gICAgLy8gUHJlcGFyZSBsZWN0dXJlIGFzc2lnbm1lbnRzXG4gICAgY29uc3Qgbm9uTGFiV29ya3Nob3BTdWJqZWN0cyA9IHN1YmplY3RzLmZpbHRlcihzID0+IHMudHlwZSAhPT0gJ0xBQicgJiYgcy50eXBlICE9PSAnV09SS1NIT1AnKTtcbiAgICBjb25zdCB0b3RhbExlY3R1cmVzID0gYWxsQXZhaWxhYmxlU2xvdHMubGVuZ3RoO1xuICAgIGxldCBzdWJqZWN0SWR4ID0gMDtcbiAgICBsZXQgYXNzaWduZWRMZWN0dXJlU2xvdHMgPSAwO1xuICAgIC8vIEFzc2lnbiBhcyBtYW55IGxlY3R1cmVzIGFzIHBvc3NpYmxlXG4gICAgZm9yIChjb25zdCBzbG90IG9mIGFsbEF2YWlsYWJsZVNsb3RzKSB7XG4gICAgICBpZiAoc3ViamVjdElkeCA+PSBub25MYWJXb3Jrc2hvcFN1YmplY3RzLmxlbmd0aCkgc3ViamVjdElkeCA9IDA7IC8vIFJlcGVhdCBzdWJqZWN0cyBpZiBuZWVkZWRcbiAgICAgIGNvbnN0IHN1YmogPSBub25MYWJXb3Jrc2hvcFN1YmplY3RzW3N1YmplY3RJZHhdO1xuICAgICAgY29uc3QgZmFjdWx0eSA9IGZhY3VsdHlTdWJqZWN0cy5maW5kKGYgPT4gZi5zdWJqZWN0SWQgPT09IHN1YmouaWQpPy5mYWN1bHR5O1xuICAgICAgaWYgKCFmYWN1bHR5KSB7XG4gICAgICAgIHN1YmplY3RJZHgrKztcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAoIWZhY3VsdHlXZWVrbHlBc3NpZ25tZW50cy5oYXMoZmFjdWx0eS5pZCkpIGZhY3VsdHlXZWVrbHlBc3NpZ25tZW50cy5zZXQoZmFjdWx0eS5pZCwgbmV3IFNldCgpKTtcbiAgICAgIGNvbnN0IGZhY1NldCA9IGZhY3VsdHlXZWVrbHlBc3NpZ25tZW50cy5nZXQoZmFjdWx0eS5pZCk7XG4gICAgICBpZiAoZmFjU2V0LmhhcyhgJHtzbG90LmRheX0tJHtzbG90LnNsb3RJZHh9YCkpIHtcbiAgICAgICAgc3ViamVjdElkeCsrO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGFzc2lnbmVkU2xvdHMucHVzaCh7XG4gICAgICAgIGNvdXJzZUlkOiBjb3Vyc2UuaWQsXG4gICAgICAgIHN1YmplY3RJZDogc3Viai5pZCxcbiAgICAgICAgZmFjdWx0eUlkOiBmYWN1bHR5LmlkLFxuICAgICAgICByb29tSWQ6IGFzc2lnbmVkUm9vbS5pZCxcbiAgICAgICAgZGF5T2ZXZWVrOiBzbG90LmRheSxcbiAgICAgICAgc3RhcnRUaW1lOiB0aW1lU2xvdHNbc2xvdC5zbG90SWR4XS5zdGFydCxcbiAgICAgICAgZW5kVGltZTogdGltZVNsb3RzW3Nsb3Quc2xvdElkeF0uZW5kLFxuICAgICAgICBzZW1lc3RlcixcbiAgICAgIH0pO1xuICAgICAgZmFjU2V0LmFkZChgJHtzbG90LmRheX0tJHtzbG90LnNsb3RJZHh9YCk7XG4gICAgICBhc3NpZ25lZExlY3R1cmVTbG90cysrO1xuICAgICAgc3ViamVjdElkeCsrO1xuICAgICAgLy8gU3RvcCBpZiB3ZSd2ZSBhc3NpZ25lZCBhcyBtYW55IGxlY3R1cmVzIGFzIHRoZXJlIGFyZSBzdWJqZWN0cyAqIHRoZWlyIGNyZWRpdHMgKG9yIHNvbWUgbWF4KVxuICAgICAgaWYgKGFzc2lnbmVkTGVjdHVyZVNsb3RzID49IG5vbkxhYldvcmtzaG9wU3ViamVjdHMubGVuZ3RoICogNSkgYnJlYWs7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKCdbVElNRVRBQkxFXSBGaW5pc2hlZCBzY2hlZHVsaW5nIGxlY3R1cmVzLiBUb3RhbCBhc3NpZ25lZCBzbG90czonLCBhc3NpZ25lZFNsb3RzLmxlbmd0aCk7XG5cbiAgICAvLyBTYXZlIHRvIERCOiBkZWxldGUgb2xkLCBpbnNlcnQgbmV3XG4gICAgY29uc29sZS5sb2coJ1tUSU1FVEFCTEVdIERlbGV0aW5nIG9sZCBzbG90cyBmcm9tIERCLi4uJyk7XG4gICAgYXdhaXQgcHJpc21hLnRpbWV0YWJsZVNsb3QuZGVsZXRlTWFueSh7IHdoZXJlOiB7IGNvdXJzZUlkOiBjb3Vyc2UuaWQsIHNlbWVzdGVyIH0gfSk7XG4gICAgY29uc29sZS5sb2coYFtUSU1FVEFCTEVdIERlbGV0ZWQgb2xkIHNsb3RzIGZvciBjb3Vyc2VJZD0ke2NvdXJzZUlkfSwgc2VtZXN0ZXI9JHtzZW1lc3Rlcn1gKTtcblxuICAgIGxldCBkYkluc2VydENvdW50ZXIgPSAwO1xuICAgIGZvciAoY29uc3Qgc2xvdCBvZiBhc3NpZ25lZFNsb3RzKSB7XG4gICAgICBhd2FpdCBwcmlzbWEudGltZXRhYmxlU2xvdC5jcmVhdGUoeyBkYXRhOiBzbG90IH0pO1xuICAgICAgZGJJbnNlcnRDb3VudGVyKys7XG4gICAgICBpZiAoZGJJbnNlcnRDb3VudGVyICUgNSA9PT0gMCB8fCBkYkluc2VydENvdW50ZXIgPT09IGFzc2lnbmVkU2xvdHMubGVuZ3RoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBbVElNRVRBQkxFXSBJbnNlcnRlZCAke2RiSW5zZXJ0Q291bnRlcn0vJHthc3NpZ25lZFNsb3RzLmxlbmd0aH0gc2xvdHMgaW50byBEQmApO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zb2xlLmxvZyhgW1RJTUVUQUJMRV0gQ3JlYXRlZCAke2Fzc2lnbmVkU2xvdHMubGVuZ3RofSBuZXcgc2xvdHNgKTtcblxuICAgIC8vIEZldGNoIGFuZCByZXR1cm5cbiAgICBjb25zdCBmdWxsU2xvdHMgPSBhd2FpdCBwcmlzbWEudGltZXRhYmxlU2xvdC5maW5kTWFueSh7XG4gICAgICB3aGVyZTogeyBjb3Vyc2VJZDogY291cnNlLmlkLCBzZW1lc3RlciB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBzdWJqZWN0OiB7IHNlbGVjdDogeyBpZDogdHJ1ZSwgbmFtZTogdHJ1ZSwgY29kZTogdHJ1ZSwgdHlwZTogdHJ1ZSB9IH0sXG4gICAgICAgIGZhY3VsdHk6IHsgc2VsZWN0OiB7IGlkOiB0cnVlLCBuYW1lOiB0cnVlLCBlbWFpbDogdHJ1ZSB9IH0sXG4gICAgICAgIHJvb206IHsgc2VsZWN0OiB7IGlkOiB0cnVlLCBuYW1lOiB0cnVlLCB0eXBlOiB0cnVlLCBidWlsZGluZzogdHJ1ZSwgZmxvb3I6IHRydWUgfSB9LFxuICAgICAgfSxcbiAgICAgIG9yZGVyQnk6IFtcbiAgICAgICAgeyBkYXlPZldlZWs6ICdhc2MnIH0sXG4gICAgICAgIHsgc3RhcnRUaW1lOiAnYXNjJyB9LFxuICAgICAgXSxcbiAgICB9KTtcblxuICAgIGNvbnNvbGUubG9nKGBbVElNRVRBQkxFXSBTdWNjZXNzZnVsbHkgZ2VuZXJhdGVkIHRpbWV0YWJsZSB3aXRoICR7ZnVsbFNsb3RzLmxlbmd0aH0gc2xvdHNgKTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgbWVzc2FnZTogJ1RpbWV0YWJsZSBnZW5lcmF0ZWQnLCBcbiAgICAgIHRpbWV0YWJsZToge1xuICAgICAgICBjb3Vyc2U6IHsgaWQ6IGNvdXJzZS5pZCwgbmFtZTogY291cnNlLm5hbWUsIGNvZGU6IGNvdXJzZS5jb2RlIH0sXG4gICAgICAgIHNlbWVzdGVyLFxuICAgICAgICBzbG90czogZnVsbFNsb3RzXG4gICAgICB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW1RJTUVUQUJMRV0gRXJyb3IgZ2VuZXJhdGluZyB0aW1ldGFibGU6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6ICdGYWlsZWQgdG8gZ2VuZXJhdGUgdGltZXRhYmxlJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gY3JlYXRlIGEgdmlydHVhbCBmYWN1bHR5XG5hc3luYyBmdW5jdGlvbiBjcmVhdGVWaXJ0dWFsRmFjdWx0eShkZXBhcnRtZW50SWQ6IG51bWJlciwgc3ViamVjdE5hbWU6IHN0cmluZykge1xuICBjb25zdCB2aXJ0dWFsRmFjdWx0eSA9IGF3YWl0IHByaXNtYS5mYWN1bHR5LmNyZWF0ZSh7XG4gICAgZGF0YToge1xuICAgICAgbmFtZTogYFZpcnR1YWwgRmFjdWx0eSAtICR7c3ViamVjdE5hbWV9YCxcbiAgICAgIGVtYWlsOiBgdmlydHVhbC4ke3N1YmplY3ROYW1lLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzKy9nLCAnLicpfUBjYW1wdXMuZWR1YCxcbiAgICAgIHBhc3N3b3JkOiAndmlydHVhbDEyMycsIC8vIFRoaXMgd2lsbCBiZSBjaGFuZ2VkIGJ5IHRoZSBmYWN1bHR5XG4gICAgICBkZXBhcnRtZW50SWQsXG4gICAgICBwb3NpdGlvbjogJ1ZpcnR1YWwgRmFjdWx0eScsXG4gICAgICBlbXBsb3llZUlkOiBgVkYke0RhdGUubm93KCl9YCxcbiAgICAgIHN0YXR1czogJ0FDVElWRSdcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gdmlydHVhbEZhY3VsdHk7XG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBjcmVhdGUgYSB2aXJ0dWFsIHJvb21cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVZpcnR1YWxSb29tKGNvdXJzZU5hbWU6IHN0cmluZykge1xuICBjb25zdCB2aXJ0dWFsUm9vbSA9IGF3YWl0IHByaXNtYS5yb29tLmNyZWF0ZSh7XG4gICAgZGF0YToge1xuICAgICAgbmFtZTogYFZpcnR1YWwtJHtjb3Vyc2VOYW1lfS0ke0RhdGUubm93KCl9YCxcbiAgICAgIGNhcGFjaXR5OiAxMDAsXG4gICAgICB0eXBlOiAnVklSVFVBTCcsXG4gICAgICBmbG9vcjogMCxcbiAgICAgIGJ1aWxkaW5nOiAnT05MSU5FJyxcbiAgICAgIGlzVmlydHVhbDogdHJ1ZSxcbiAgICAgIHN0YXR1czogJ0FDVElWRScsXG4gICAgfSxcbiAgfSk7XG4gIHJldHVybiB2aXJ0dWFsUm9vbTtcbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGhhbmRsZSBmYWN1bHR5IHNob3J0YWdlXG5hc3luYyBmdW5jdGlvbiBoYW5kbGVGYWN1bHR5U2hvcnRhZ2Uoc3ViamVjdDogYW55LCBkZXBhcnRtZW50SWQ6IG51bWJlcikge1xuICBjb25zb2xlLmxvZyhgW1RJTUVUQUJMRSBERUJVR10gQ3JlYXRpbmcgdmlydHVhbCBmYWN1bHR5IGZvciBzdWJqZWN0OiAke3N1YmplY3QubmFtZX1gKTtcbiAgY29uc3QgdmlydHVhbEZhY3VsdHkgPSBhd2FpdCBjcmVhdGVWaXJ0dWFsRmFjdWx0eShkZXBhcnRtZW50SWQsIHN1YmplY3QubmFtZSk7XG4gIFxuICAvLyBBc3NpZ24gdGhlIHZpcnR1YWwgZmFjdWx0eSB0byB0aGUgc3ViamVjdFxuICBhd2FpdCBwcmlzbWEuZmFjdWx0eVN1YmplY3QuY3JlYXRlKHtcbiAgICBkYXRhOiB7XG4gICAgICBmYWN1bHR5SWQ6IHZpcnR1YWxGYWN1bHR5LmlkLFxuICAgICAgc3ViamVjdElkOiBzdWJqZWN0LmlkXG4gICAgfVxuICB9KTtcbiAgXG4gIHJldHVybiB2aXJ0dWFsRmFjdWx0eTtcbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGhhbmRsZSByb29tIHNob3J0YWdlXG5hc3luYyBmdW5jdGlvbiBoYW5kbGVSb29tU2hvcnRhZ2UoY291cnNlOiBhbnksIHR5cGU6IHN0cmluZykge1xuICBjb25zb2xlLmxvZyhgW1RJTUVUQUJMRSBERUJVR10gQ3JlYXRpbmcgdmlydHVhbCByb29tIGZvciBjb3Vyc2U6ICR7Y291cnNlLm5hbWV9YCk7XG4gIGNvbnN0IHZpcnR1YWxSb29tID0gYXdhaXQgY3JlYXRlVmlydHVhbFJvb20oY291cnNlLm5hbWUpO1xuICByZXR1cm4gdmlydHVhbFJvb207XG59ICJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJwcmlzbWEiLCJnZXRTZXJ2ZXJTZXNzaW9uIiwiYXV0aE9wdGlvbnMiLCJQT1NUIiwicmVxdWVzdCIsInNlc3Npb24iLCJ1c2VyIiwicm9sZSIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsImJvZHkiLCJjb3Vyc2VJZCIsInNlbWVzdGVyIiwiY29uc29sZSIsImxvZyIsImNvdXJzZSIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImlkIiwiaW5jbHVkZSIsImRlcGFydG1lbnQiLCJzdWJqZWN0cyIsInN1YmplY3QiLCJmaW5kTWFueSIsImxlbmd0aCIsIk5PTl9URUFDSElOR19QT1NJVElPTlMiLCJmYWN1bHR5U3ViamVjdHMiLCJmYWN1bHR5U3ViamVjdCIsImZhY3VsdHkiLCJOT1QiLCJPUiIsIm1hcCIsInBvcyIsInBvc2l0aW9uIiwiY29udGFpbnMiLCJtb2RlIiwiYWxsUm9vbXMiLCJyb29tIiwibGVjdHVyZVJvb21zIiwiZmlsdGVyIiwiciIsInR5cGUiLCJsYWJSb29tcyIsIndvcmtzaG9wUm9vbXMiLCJhc3NpZ25lZFJvb20iLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJuYW1lIiwiZGF5cyIsInRpbWVTbG90cyIsInN0YXJ0IiwiZW5kIiwiZmFjdWx0eVdlZWtseUFzc2lnbm1lbnRzIiwiTWFwIiwibHVuY2hTbG90cyIsImRheSIsImlzTHVuY2hQZXJpb2QiLCJzbG90SWR4IiwiYXNzaWduZWRTbG90cyIsImlzQ29tcHV0ZXJSZWxhdGVkIiwidGVzdCIsImlzTWVjaGFuaWNhbE9yV29ya3Nob3AiLCJwcmFjdGljYWxzIiwicyIsInByYWN0aWNhbENvdW50ZXIiLCJwcmFjdGljYWwiLCJzY2hlZHVsZWQiLCJkYXlzU2h1ZmZsZWQiLCJzb3J0IiwicHJhY3RpY2FsUm9vbXMiLCJ3YXJuIiwiZmluZCIsImYiLCJzdWJqZWN0SWQiLCJoYXMiLCJzZXQiLCJTZXQiLCJmYWNTZXQiLCJnZXQiLCJmb3VuZFJvb20iLCJwdXNoIiwiZmFjdWx0eUlkIiwicm9vbUlkIiwiZGF5T2ZXZWVrIiwic3RhcnRUaW1lIiwiZW5kVGltZSIsImFkZCIsImFsbEF2YWlsYWJsZVNsb3RzIiwiaSIsImoiLCJub25MYWJXb3Jrc2hvcFN1YmplY3RzIiwidG90YWxMZWN0dXJlcyIsInN1YmplY3RJZHgiLCJhc3NpZ25lZExlY3R1cmVTbG90cyIsInNsb3QiLCJzdWJqIiwidGltZXRhYmxlU2xvdCIsImRlbGV0ZU1hbnkiLCJkYkluc2VydENvdW50ZXIiLCJjcmVhdGUiLCJkYXRhIiwiZnVsbFNsb3RzIiwic2VsZWN0IiwiY29kZSIsImVtYWlsIiwiYnVpbGRpbmciLCJvcmRlckJ5IiwibWVzc2FnZSIsInRpbWV0YWJsZSIsInNsb3RzIiwiY3JlYXRlVmlydHVhbEZhY3VsdHkiLCJkZXBhcnRtZW50SWQiLCJzdWJqZWN0TmFtZSIsInZpcnR1YWxGYWN1bHR5IiwidG9Mb3dlckNhc2UiLCJyZXBsYWNlIiwicGFzc3dvcmQiLCJlbXBsb3llZUlkIiwiRGF0ZSIsIm5vdyIsImNyZWF0ZVZpcnR1YWxSb29tIiwiY291cnNlTmFtZSIsInZpcnR1YWxSb29tIiwiY2FwYWNpdHkiLCJpc1ZpcnR1YWwiLCJoYW5kbGVGYWN1bHR5U2hvcnRhZ2UiLCJoYW5kbGVSb29tU2hvcnRhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/admin/timetable/generate/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions)\n/* harmony export */ });\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var _prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n\n\n\nconst authOptions = {\n    providers: [\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n            name: \"Credentials\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                console.log(\"Authorize function called with credentials:\", credentials);\n                // --- TEMPORARY: Allow dummy student user for testing the flow ---\n                if (credentials?.email === \"dummyStudentUser@example.com\" && credentials?.password === \"password\") {\n                    console.log(\"Temporary student bypass hit!\");\n                    return {\n                        id: \"dummyStudentId\",\n                        email: \"dummyStudentUser@example.com\",\n                        name: \"Dummy Student\",\n                        role: \"STUDENT\"\n                    };\n                }\n                // --- END TEMPORARY ---\n                if (!credentials?.email || !credentials?.password) {\n                    console.log(\"Missing email or password.\");\n                    throw new Error(\"Please enter an email/ID and password\");\n                }\n                // 1. Try to find admin (by email only)\n                let user = await _prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.admin.findUnique({\n                    where: {\n                        email: credentials.email\n                    }\n                });\n                if (user) {\n                    const passwordMatch = await bcryptjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"].compare(credentials.password, user.password);\n                    if (!passwordMatch) {\n                        console.log(\"Admin: Incorrect password.\");\n                        throw new Error(\"Incorrect password\");\n                    }\n                    console.log(\"Admin user found.\");\n                    return {\n                        id: user.id,\n                        email: user.email,\n                        name: user.name,\n                        role: \"ADMIN\",\n                        isSuperAdmin: user.isSuperAdmin,\n                        profilePicture: user.profilePicture\n                    };\n                }\n                // 2. Try to find faculty (by email or employeeId)\n                user = await _prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.faculty.findFirst({\n                    where: {\n                        OR: [\n                            {\n                                email: credentials.email\n                            },\n                            {\n                                employeeId: credentials.email\n                            }\n                        ]\n                    }\n                });\n                if (user) {\n                    if (user.status !== \"ACTIVE\") {\n                        console.log(\"Faculty: Account not active.\");\n                        throw new Error(\"Your account is not active\");\n                    }\n                    const passwordMatch = await bcryptjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"].compare(credentials.password, user.password);\n                    if (!passwordMatch) {\n                        console.log(\"Faculty: Incorrect password.\");\n                        throw new Error(\"Incorrect password\");\n                    }\n                    console.log(\"Faculty user found.\");\n                    return {\n                        id: user.id,\n                        email: user.email,\n                        name: user.name,\n                        role: \"FACULTY\",\n                        profilePicture: user.profilePicture\n                    };\n                }\n                // 3. Try to find student (by email or rollNumber)\n                user = await _prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.student.findFirst({\n                    where: {\n                        OR: [\n                            {\n                                email: credentials.email\n                            },\n                            {\n                                rollNumber: credentials.email\n                            }\n                        ]\n                    }\n                });\n                if (user) {\n                    if (user.status !== \"ACTIVE\") {\n                        console.log(\"Student: Account not active.\");\n                        throw new Error(\"Your account is not active\");\n                    }\n                    const passwordMatch = await bcryptjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"].compare(credentials.password, user.password);\n                    if (!passwordMatch) {\n                        console.log(\"Student: Incorrect password.\");\n                        throw new Error(\"Incorrect password\");\n                    }\n                    console.log(\"Student user found.\");\n                    return {\n                        id: user.id,\n                        email: user.email,\n                        name: user.name,\n                        role: \"STUDENT\",\n                        profilePicture: user.profilePicture\n                    };\n                }\n                console.log(\"No user found with provided credentials.\");\n                throw new Error(\"No user found with this email or ID\");\n            }\n        })\n    ],\n    pages: {\n        signIn: \"/auth/login\",\n        signOut: \"/auth/logout\",\n        error: \"/auth/error\"\n    },\n    callbacks: {\n        async jwt ({ token, user }) {\n            if (user) {\n                token.id = user.id;\n                token.role = user.role;\n                if (user.role === \"ADMIN\") {\n                    token.isSuperAdmin = user.isSuperAdmin;\n                }\n                if (user.profilePicture) {\n                    token.profilePicture = user.profilePicture;\n                }\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            if (session.user) {\n                session.user.id = token.id;\n                session.user.role = token.role;\n                if (token.role === \"ADMIN\") {\n                    session.user.isSuperAdmin = token.isSuperAdmin;\n                }\n                if (token.profilePicture) {\n                    session.user.profilePicture = token.profilePicture;\n                }\n            }\n            return session;\n        }\n    },\n    session: {\n        strategy: \"jwt\",\n        maxAge: 30 * 24 * 60 * 60\n    },\n    secret: process.env.NEXTAUTH_SECRET,\n    jwt: {\n        maxAge: 30 * 24 * 60 * 60\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UXRCLElBQUksRUFBRTtnQkFDaEJzQixRQUFRdEIsSUFBSSxDQUFDSCxFQUFFLEdBQUd3QixNQUFNeEIsRUFBRTtnQkFDMUJ5QixRQUFRdEIsSUFBSSxDQUFDRixJQUFJLEdBQUd1QixNQUFNdkIsSUFBSTtnQkFDOUIsSUFBSXVCLE1BQU12QixJQUFJLEtBQUssU0FBUztvQkFDekJ3QixRQUFRdEIsSUFBSSxDQUFTTSxZQUFZLEdBQUdlLE1BQU1mLFlBQVk7Z0JBQ3pEO2dCQUNBLElBQUllLE1BQU1kLGNBQWMsRUFBRTtvQkFDdkJlLFFBQVF0QixJQUFJLENBQVNPLGNBQWMsR0FBR2MsTUFBTWQsY0FBYztnQkFDN0Q7WUFDRjtZQUNBLE9BQU9lO1FBQ1Q7SUFDRjtJQUNBQSxTQUFTO1FBQ1BDLFVBQVU7UUFDVkMsUUFBUSxLQUFLLEtBQUssS0FBSztJQUN6QjtJQUNBQyxRQUFRQyxRQUFRQyxHQUFHLENBQUNDLGVBQWU7SUFDbkNSLEtBQUs7UUFDSEksUUFBUSxLQUFLLEtBQUssS0FBSztJQUN6QjtBQUNGLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYW1wdXMtbWluZC8uL3NyYy9saWIvYXV0aC50cz82NjkyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBdXRoT3B0aW9ucyB9IGZyb20gXCJuZXh0LWF1dGhcIlxuaW1wb3J0IENyZWRlbnRpYWxzUHJvdmlkZXIgZnJvbSBcIm5leHQtYXV0aC9wcm92aWRlcnMvY3JlZGVudGlhbHNcIlxuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSBcIi4vcHJpc21hXCJcbmltcG9ydCBiY3J5cHQgZnJvbSBcImJjcnlwdGpzXCJcblxuZXhwb3J0IGNvbnN0IGF1dGhPcHRpb25zOiBOZXh0QXV0aE9wdGlvbnMgPSB7XG4gIHByb3ZpZGVyczogW1xuICAgIENyZWRlbnRpYWxzUHJvdmlkZXIoe1xuICAgICAgbmFtZTogXCJDcmVkZW50aWFsc1wiLFxuICAgICAgY3JlZGVudGlhbHM6IHtcbiAgICAgICAgZW1haWw6IHsgbGFiZWw6IFwiRW1haWxcIiwgdHlwZTogXCJlbWFpbFwiIH0sXG4gICAgICAgIHBhc3N3b3JkOiB7IGxhYmVsOiBcIlBhc3N3b3JkXCIsIHR5cGU6IFwicGFzc3dvcmRcIiB9LFxuICAgICAgfSxcbiAgICAgIGFzeW5jIGF1dGhvcml6ZShjcmVkZW50aWFscykge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkF1dGhvcml6ZSBmdW5jdGlvbiBjYWxsZWQgd2l0aCBjcmVkZW50aWFsczpcIiwgY3JlZGVudGlhbHMpO1xuXG4gICAgICAgIC8vIC0tLSBURU1QT1JBUlk6IEFsbG93IGR1bW15IHN0dWRlbnQgdXNlciBmb3IgdGVzdGluZyB0aGUgZmxvdyAtLS1cbiAgICAgICAgaWYgKGNyZWRlbnRpYWxzPy5lbWFpbCA9PT0gXCJkdW1teVN0dWRlbnRVc2VyQGV4YW1wbGUuY29tXCIgJiYgY3JlZGVudGlhbHM/LnBhc3N3b3JkID09PSBcInBhc3N3b3JkXCIpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIlRlbXBvcmFyeSBzdHVkZW50IGJ5cGFzcyBoaXQhXCIpO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogXCJkdW1teVN0dWRlbnRJZFwiLCAvLyBSZXBsYWNlIHdpdGggYSByZWFsIElEIGluIGEgcHJvZHVjdGlvbiBzY2VuYXJpb1xuICAgICAgICAgICAgZW1haWw6IFwiZHVtbXlTdHVkZW50VXNlckBleGFtcGxlLmNvbVwiLFxuICAgICAgICAgICAgbmFtZTogXCJEdW1teSBTdHVkZW50XCIsXG4gICAgICAgICAgICByb2xlOiBcIlNUVURFTlRcIixcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIC8vIC0tLSBFTkQgVEVNUE9SQVJZIC0tLVxuXG4gICAgICAgIGlmICghY3JlZGVudGlhbHM/LmVtYWlsIHx8ICFjcmVkZW50aWFscz8ucGFzc3dvcmQpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIk1pc3NpbmcgZW1haWwgb3IgcGFzc3dvcmQuXCIpO1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUGxlYXNlIGVudGVyIGFuIGVtYWlsL0lEIGFuZCBwYXNzd29yZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gMS4gVHJ5IHRvIGZpbmQgYWRtaW4gKGJ5IGVtYWlsIG9ubHkpXG4gICAgICAgIGxldCB1c2VyID0gYXdhaXQgcHJpc21hLmFkbWluLmZpbmRVbmlxdWUoe1xuICAgICAgICAgIHdoZXJlOiB7IGVtYWlsOiBjcmVkZW50aWFscy5lbWFpbCB9LFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgICBjb25zdCBwYXNzd29yZE1hdGNoID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUoY3JlZGVudGlhbHMucGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpO1xuICAgICAgICAgIGlmICghcGFzc3dvcmRNYXRjaCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBZG1pbjogSW5jb3JyZWN0IHBhc3N3b3JkLlwiKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW5jb3JyZWN0IHBhc3N3b3JkJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnNvbGUubG9nKFwiQWRtaW4gdXNlciBmb3VuZC5cIik7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgICAgICBuYW1lOiB1c2VyLm5hbWUsXG4gICAgICAgICAgICByb2xlOiAnQURNSU4nLFxuICAgICAgICAgICAgaXNTdXBlckFkbWluOiB1c2VyLmlzU3VwZXJBZG1pbixcbiAgICAgICAgICAgIHByb2ZpbGVQaWN0dXJlOiB1c2VyLnByb2ZpbGVQaWN0dXJlLFxuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAvLyAyLiBUcnkgdG8gZmluZCBmYWN1bHR5IChieSBlbWFpbCBvciBlbXBsb3llZUlkKVxuICAgICAgICB1c2VyID0gYXdhaXQgcHJpc21hLmZhY3VsdHkuZmluZEZpcnN0KHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgT1I6IFtcbiAgICAgICAgICAgICAgeyBlbWFpbDogY3JlZGVudGlhbHMuZW1haWwgfSxcbiAgICAgICAgICAgICAgeyBlbXBsb3llZUlkOiBjcmVkZW50aWFscy5lbWFpbCB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgICBpZiAodXNlci5zdGF0dXMgIT09ICdBQ1RJVkUnKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkZhY3VsdHk6IEFjY291bnQgbm90IGFjdGl2ZS5cIik7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdXIgYWNjb3VudCBpcyBub3QgYWN0aXZlJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHBhc3N3b3JkTWF0Y2ggPSBhd2FpdCBiY3J5cHQuY29tcGFyZShjcmVkZW50aWFscy5wYXNzd29yZCwgdXNlci5wYXNzd29yZCk7XG4gICAgICAgICAgaWYgKCFwYXNzd29yZE1hdGNoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkZhY3VsdHk6IEluY29ycmVjdCBwYXNzd29yZC5cIik7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0luY29ycmVjdCBwYXNzd29yZCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zb2xlLmxvZyhcIkZhY3VsdHkgdXNlciBmb3VuZC5cIik7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgICAgICBuYW1lOiB1c2VyLm5hbWUsXG4gICAgICAgICAgICByb2xlOiAnRkFDVUxUWScsXG4gICAgICAgICAgICBwcm9maWxlUGljdHVyZTogdXNlci5wcm9maWxlUGljdHVyZSxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gMy4gVHJ5IHRvIGZpbmQgc3R1ZGVudCAoYnkgZW1haWwgb3Igcm9sbE51bWJlcilcbiAgICAgICAgdXNlciA9IGF3YWl0IHByaXNtYS5zdHVkZW50LmZpbmRGaXJzdCh7XG4gICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgIE9SOiBbXG4gICAgICAgICAgICAgIHsgZW1haWw6IGNyZWRlbnRpYWxzLmVtYWlsIH0sXG4gICAgICAgICAgICAgIHsgcm9sbE51bWJlcjogY3JlZGVudGlhbHMuZW1haWwgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgICAgaWYgKHVzZXIuc3RhdHVzICE9PSAnQUNUSVZFJykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJTdHVkZW50OiBBY2NvdW50IG5vdCBhY3RpdmUuXCIpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3VyIGFjY291bnQgaXMgbm90IGFjdGl2ZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBwYXNzd29yZE1hdGNoID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUoY3JlZGVudGlhbHMucGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpO1xuICAgICAgICAgIGlmICghcGFzc3dvcmRNYXRjaCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJTdHVkZW50OiBJbmNvcnJlY3QgcGFzc3dvcmQuXCIpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbmNvcnJlY3QgcGFzc3dvcmQnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc29sZS5sb2coXCJTdHVkZW50IHVzZXIgZm91bmQuXCIpO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogdXNlci5pZCxcbiAgICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgICAgbmFtZTogdXNlci5uYW1lLFxuICAgICAgICAgICAgcm9sZTogJ1NUVURFTlQnLFxuICAgICAgICAgICAgcHJvZmlsZVBpY3R1cmU6IHVzZXIucHJvZmlsZVBpY3R1cmUsXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKFwiTm8gdXNlciBmb3VuZCB3aXRoIHByb3ZpZGVkIGNyZWRlbnRpYWxzLlwiKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB1c2VyIGZvdW5kIHdpdGggdGhpcyBlbWFpbCBvciBJRCcpO1xuICAgICAgfSxcbiAgICB9KVxuICBdLFxuICBwYWdlczoge1xuICAgIHNpZ25JbjogJy9hdXRoL2xvZ2luJyxcbiAgICBzaWduT3V0OiAnL2F1dGgvbG9nb3V0JyxcbiAgICBlcnJvcjogJy9hdXRoL2Vycm9yJyxcbiAgfSxcbiAgY2FsbGJhY2tzOiB7XG4gICAgYXN5bmMgand0KHsgdG9rZW4sIHVzZXIgfSkge1xuICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgdG9rZW4uaWQgPSB1c2VyLmlkXG4gICAgICAgIHRva2VuLnJvbGUgPSB1c2VyLnJvbGVcbiAgICAgICAgaWYgKHVzZXIucm9sZSA9PT0gJ0FETUlOJykge1xuICAgICAgICAgIHRva2VuLmlzU3VwZXJBZG1pbiA9ICh1c2VyIGFzIGFueSkuaXNTdXBlckFkbWluO1xuICAgICAgICB9XG4gICAgICAgIGlmICgodXNlciBhcyBhbnkpLnByb2ZpbGVQaWN0dXJlKSB7XG4gICAgICAgICAgdG9rZW4ucHJvZmlsZVBpY3R1cmUgPSAodXNlciBhcyBhbnkpLnByb2ZpbGVQaWN0dXJlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdG9rZW5cbiAgICB9LFxuICAgIGFzeW5jIHNlc3Npb24oeyBzZXNzaW9uLCB0b2tlbiB9KSB7XG4gICAgICBpZiAoc2Vzc2lvbi51c2VyKSB7XG4gICAgICAgIHNlc3Npb24udXNlci5pZCA9IHRva2VuLmlkIGFzIHN0cmluZ1xuICAgICAgICBzZXNzaW9uLnVzZXIucm9sZSA9IHRva2VuLnJvbGUgYXMgc3RyaW5nXG4gICAgICAgIGlmICh0b2tlbi5yb2xlID09PSAnQURNSU4nKSB7XG4gICAgICAgICAgKHNlc3Npb24udXNlciBhcyBhbnkpLmlzU3VwZXJBZG1pbiA9IHRva2VuLmlzU3VwZXJBZG1pbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodG9rZW4ucHJvZmlsZVBpY3R1cmUpIHtcbiAgICAgICAgICAoc2Vzc2lvbi51c2VyIGFzIGFueSkucHJvZmlsZVBpY3R1cmUgPSB0b2tlbi5wcm9maWxlUGljdHVyZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHNlc3Npb25cbiAgICB9XG4gIH0sXG4gIHNlc3Npb246IHtcbiAgICBzdHJhdGVneTogXCJqd3RcIixcbiAgICBtYXhBZ2U6IDMwICogMjQgKiA2MCAqIDYwLCAvLyAzMCBkYXlzXG4gIH0sXG4gIHNlY3JldDogcHJvY2Vzcy5lbnYuTkVYVEFVVEhfU0VDUkVULFxuICBqd3Q6IHtcbiAgICBtYXhBZ2U6IDMwICogMjQgKiA2MCAqIDYwLCAvLyAzMCBkYXlzXG4gIH0sXG59ICJdLCJuYW1lcyI6WyJDcmVkZW50aWFsc1Byb3ZpZGVyIiwicHJpc21hIiwiYmNyeXB0IiwiYXV0aE9wdGlvbnMiLCJwcm92aWRlcnMiLCJuYW1lIiwiY3JlZGVudGlhbHMiLCJlbWFpbCIsImxhYmVsIiwidHlwZSIsInBhc3N3b3JkIiwiYXV0aG9yaXplIiwiY29uc29sZSIsImxvZyIsImlkIiwicm9sZSIsIkVycm9yIiwidXNlciIsImFkbWluIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwicGFzc3dvcmRNYXRjaCIsImNvbXBhcmUiLCJpc1N1cGVyQWRtaW4iLCJwcm9maWxlUGljdHVyZSIsImZhY3VsdHkiLCJmaW5kRmlyc3QiLCJPUiIsImVtcGxveWVlSWQiLCJzdGF0dXMiLCJzdHVkZW50Iiwicm9sbE51bWJlciIsInBhZ2VzIiwic2lnbkluIiwic2lnbk91dCIsImVycm9yIiwiY2FsbGJhY2tzIiwiand0IiwidG9rZW4iLCJzZXNzaW9uIiwic3RyYXRlZ3kiLCJtYXhBZ2UiLCJzZWNyZXQiLCJwcm9jZXNzIiwiZW52IiwiTkVYVEFVVEhfU0VDUkVUIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log: [\n        \"query\",\n        \"error\",\n        \"warn\"\n    ]\n});\nif (true) {\n    globalForPrisma.prisma = prisma;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNkM7QUFFN0MsTUFBTUMsa0JBQWtCQztBQUlqQixNQUFNQyxTQUFTRixnQkFBZ0JFLE1BQU0sSUFBSSxJQUFJSCx3REFBWUEsQ0FBQztJQUMvREksS0FBSztRQUFDO1FBQVM7UUFBUztLQUFPO0FBQ2pDLEdBQUU7QUFFRixJQUFJQyxJQUF5QixFQUFjO0lBQ3pDSixnQkFBZ0JFLE1BQU0sR0FBR0E7QUFDM0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYW1wdXMtbWluZC8uL3NyYy9saWIvcHJpc21hLnRzPzAxZDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnXG5cbmNvbnN0IGdsb2JhbEZvclByaXNtYSA9IGdsb2JhbFRoaXMgYXMgdW5rbm93biBhcyB7XG4gIHByaXNtYTogUHJpc21hQ2xpZW50IHwgdW5kZWZpbmVkXG59XG5cbmV4cG9ydCBjb25zdCBwcmlzbWEgPSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID8/IG5ldyBQcmlzbWFDbGllbnQoe1xuICBsb2c6IFsncXVlcnknLCAnZXJyb3InLCAnd2FybiddLFxufSlcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYVxufSAiXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsVGhpcyIsInByaXNtYSIsImxvZyIsInByb2Nlc3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/next-auth","vendor-chunks/@babel","vendor-chunks/bcryptjs","vendor-chunks/openid-client","vendor-chunks/oauth","vendor-chunks/object-hash","vendor-chunks/preact","vendor-chunks/preact-render-to-string","vendor-chunks/uuid","vendor-chunks/yallist","vendor-chunks/lru-cache","vendor-chunks/cookie","vendor-chunks/oidc-token-hash","vendor-chunks/@panva"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Ftimetable%2Fgenerate%2Froute&page=%2Fapi%2Fadmin%2Ftimetable%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Ftimetable%2Fgenerate%2Froute.ts&appDir=%2FUsers%2Fmr_singh_7112%2FDesktop%2Fcampus_mind_backup_4_10_30%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmr_singh_7112%2FDesktop%2Fcampus_mind_backup_4_10_30&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();